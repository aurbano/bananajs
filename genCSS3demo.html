<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Bananajs Demo</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="assets/styles.css">
  <link href='https://fonts.googleapis.com/css?family=Work+Sans:100' rel='stylesheet' type='text/css'>
  <style type="text/css">
  .colorContainer {
    display: inline-block;
    margin: 0 25px 15px 0;
    text-align: center;
    width: 125px;
  }
  
  .colorBox {
    width: 50px;
    height: 50px;
  }
  
  .colorBox:first-child {
    margin-right: 5px;
  }
  
  .colorBox:hover {
    transform: scale(1.1, 1.1);
  }
  
  .colorName {
    color: #888;
    font-style: italic;
  }
  </style>
</head>

<body style="font-family: Arial;border: 0 none;">
  <!-- Begin page content -->
  <div class="container">
    <h1><a href="http://urbanoalvarez.es/bananajs">
      <img src="assets/banana.gif" style="padding-bottom: 23px"/>
      Bananajs
    </a></h1>
    <div class="lead text-center">
      <p>How do CSS3 named colors compare to what Google thinks they are?</p>
      <p><small class="text-muted">Display: Official color | Bananajs version &bull; <a href="https://github.com/aurbano/bananajs">More info</a></small></p>
    </div>
    <div style="margin-bottom:100px"></div>
    <div class="row">
      <div class="col-md-12 text-center">
        <div id="colorContainer"></div>
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="container">
      <p class="text-muted">
        &copy; <a href="http://urbanoalvarez.es">Alejandro U. Alvarez</a> (2015) - <a href="https://github.com/aurbano/bananajs">Bananajs</a>
        <div id="branding"></div>
      </p>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="https://www.google.com/jsapi"></script>
  <script src="lib/colorthief.js"></script>
  <script src="lib/colors.js"></script>
  <script src="src/banana.js"></script>
  <script type="text/javascript">
  var banana = new Bananajs({
    googleApi: google,
    debug: true
  });

  function getRGBString(rgbArray) {
    return "rgb(" + rgbArray[0] + "," + rgbArray[1] + "," + rgbArray[2] + ")";
  }

  google.setOnLoadCallback(function() {
    var $colorContainer = $("#colorContainer"),
      allColors = {},
      promises = [],
      count = 0;

    for (var namedColor in CSS_NAMED_COLORS) {
      count++;
      if (count > 4) break;
      var id = namedColor.replace(/ /g, '-');

      $colorContainer.append('<div class="colorContainer">' +
        '<div class="img-thumbnail colorBox" data-toggle="tooltip" title="' + CSS_NAMED_COLORS[namedColor] + '" style="background:' + CSS_NAMED_COLORS[namedColor] + '"></div>' +
        '<div class="img-thumbnail colorBox" id="' + id + '" data-toggle="tooltip2"></div>' +
        '<div class="colorName">' + namedColor + "</div></div>");

      // Get color
      (function(id, namedColor) {
        promises.push(banana.getColor(namedColor).then(function(color) {
          var rgb = getRGBString(color);
          $('#' + id).css("backgroundColor", rgb).attr("title", rgb);

          allColors[namedColor] = {
            css: CSS_NAMED_COLORS[namedColor],
            banana: rgb
          };
        }))
      })(id, namedColor);
    }

    Promise.all(promises).then(function() {
      $('[data-toggle="tooltip2"]').tooltip();
      console.log(allColors, JSON.stringify(allColors));
    });

    $('[data-toggle="tooltip"]').tooltip();

    // Include the required Google branding
    google.search.Search.getBranding("branding");
  });
  </script>
</body>

</html>
